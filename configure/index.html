
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../install/">
      
      
        <link rel="next" href="../using_kibana/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Configuration - Elasticsearch Component for Home Assistant</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Elasticsearch Component for Home Assistant" class="md-header__button md-logo" aria-label="Elasticsearch Component for Home Assistant" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Elasticsearch Component for Home Assistant
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuration
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Elasticsearch Component for Home Assistant" class="md-nav__button md-logo" aria-label="Elasticsearch Component for Home Assistant" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Elasticsearch Component for Home Assistant
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#gather-elasticsearch-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gather Elasticsearch details
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gather Elasticsearch details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        Credentials
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-the-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add the integration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration options
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#send-events-to-elasticsearch-at-this-interval" class="md-nav__link">
    <span class="md-ellipsis">
      
        Send events to Elasticsearch at this interval
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gather-all-entity-states-at-this-interval" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gather all entity states at this interval
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choose-what-types-of-entity-changes-to-listen-for-and-publish" class="md-nav__link">
    <span class="md-ellipsis">
      
        Choose what types of entity changes to listen for and publish
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tags-to-apply-to-all-published-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tags to apply to all published events
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toggle-to-only-publish-the-set-of-targets-below" class="md-nav__link">
    <span class="md-ellipsis">
      
        Toggle to only publish the set of targets below
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toggle-to-exclude-publishing-the-set-of-targets-below" class="md-nav__link">
    <span class="md-ellipsis">
      
        Toggle to exclude publishing the set of targets below
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-certificate-authority-ca" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom certificate authority (CA)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_kibana/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using Kibana
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingest_advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced ingest configuration
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#gather-elasticsearch-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gather Elasticsearch details
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gather Elasticsearch details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        Credentials
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-the-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add the integration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration options
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#send-events-to-elasticsearch-at-this-interval" class="md-nav__link">
    <span class="md-ellipsis">
      
        Send events to Elasticsearch at this interval
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gather-all-entity-states-at-this-interval" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gather all entity states at this interval
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choose-what-types-of-entity-changes-to-listen-for-and-publish" class="md-nav__link">
    <span class="md-ellipsis">
      
        Choose what types of entity changes to listen for and publish
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tags-to-apply-to-all-published-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tags to apply to all published events
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toggle-to-only-publish-the-set-of-targets-below" class="md-nav__link">
    <span class="md-ellipsis">
      
        Toggle to only publish the set of targets below
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toggle-to-exclude-publishing-the-set-of-targets-below" class="md-nav__link">
    <span class="md-ellipsis">
      
        Toggle to exclude publishing the set of targets below
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-certificate-authority-ca" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom certificate authority (CA)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">#</a></h1>
<h2 id="gather-elasticsearch-details">Gather Elasticsearch details<a class="headerlink" href="#gather-elasticsearch-details" title="Permanent link">#</a></h2>
<p>You will need the following details to configure the Elasticsearch integration:</p>
<ol>
<li>The URL of your Elasticsearch instance</li>
<li>Credentials to access the Elasticsearch instance (if required)</li>
<li>The SSL certificate authority (CA) file, if you are using a custom CA not trusted by the host system</li>
</ol>
<h3 id="credentials">Credentials<a class="headerlink" href="#credentials" title="Permanent link">#</a></h3>
<p>You must provide credentials if your Elasticsearch instance is secured. While we support authenticating via username/password, we recommend using API Keys for simplicity and compatibility with all versions of Elasticsearch.</p>
<p>Use the following command to create an API Key for the Home Assistant component.:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">curl</label><label for="__tabbed_1_2">Dev Tools</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>https://localhost:9200/_security/api_key<span class="w"> </span><span class="se">\ </span><span class="c1"># (1)</span>
<span class="w">  </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-u<span class="w"> </span>elastic:changeme<span class="w"> </span><span class="se">\ </span><span class="c1"># (2)</span>
<span class="w">  </span>-d<span class="s1">&#39;</span>
<span class="s1">  {</span>
<span class="s1">    &quot;name&quot;: &quot;home_assistant_component&quot;,</span>
<span class="s1">    &quot;role_descriptors&quot;: {</span>
<span class="s1">      &quot;hass_writer&quot;: {</span>
<span class="s1">        &quot;cluster&quot;: [</span>
<span class="s1">          &quot;manage_index_templates&quot;,</span>
<span class="s1">          &quot;monitor&quot;</span>
<span class="s1">        ],</span>
<span class="s1">        &quot;indices&quot;: [</span>
<span class="s1">          {</span>
<span class="s1">            &quot;names&quot;: [</span>
<span class="s1">              &quot;metrics-homeassistant.*&quot;</span>
<span class="s1">            ],</span>
<span class="s1">            &quot;privileges&quot;: [</span>
<span class="s1">              &quot;manage&quot;,</span>
<span class="s1">              &quot;index&quot;,</span>
<span class="s1">              &quot;create_index&quot;,</span>
<span class="s1">              &quot;create&quot;</span>
<span class="s1">            ]</span>
<span class="s1">          }</span>
<span class="s1">        ]</span>
<span class="s1">      }</span>
<span class="s1">    }</span>
<span class="s1">  }</span>
<span class="s1">&#39;</span>
</code></pre></div>
<ol>
<li>Replace <code>https://localhost:9200</code> with the URL of your Elasticsearch instance.</li>
<li>Replace <code>elastic:changeme</code> with your Elasticsearch credentials.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>POST /_security/api_key
{
  &quot;name&quot;: &quot;home_assistant_component&quot;,
  &quot;role_descriptors&quot;: {
    &quot;hass_writer&quot;: {
      &quot;cluster&quot;: [
        &quot;manage_index_templates&quot;,
        &quot;monitor&quot;
      ],
      &quot;indices&quot;: [
        {
          &quot;names&quot;: [
            &quot;metrics-homeassistant.*&quot;
          ],
          &quot;privileges&quot;: [
            &quot;manage&quot;,
            &quot;index&quot;,
            &quot;create_index&quot;,
            &quot;create&quot;
          ]
        }
      ]
    }
  }
}
</code></pre></div>
</div>
</div>
</div>
<p>The API Key will be returned in the response. Save the <code>encoded</code> field for use in the configuration.</p>
<p>Read the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-create-api-key.html">Elasticsearch documentation</a> for more information on creating API Keys.</p>
<h2 id="add-the-integration">Add the integration<a class="headerlink" href="#add-the-integration" title="Permanent link">#</a></h2>
<p>This component is configured interactively via Home Assistant's integration configuration page.</p>
<ol>
<li>Verify you have restarted Home Assistant after installing the component.</li>
<li>From the <a href="https://my.home-assistant.io/redirect/integrations/"><code>Integrations</code> configuration menu</a>, add a new <code>Elasticsearch</code> integration.</li>
<li>Provide the URL of your elasticsearch server in the format <code>https://&lt;host&gt;:&lt;port&gt;</code>. For example, <code>https://localhost:9200</code>.</li>
<li>If your Elasticsearch instance is untrusted, you will be prompted to provide the path to the CA file or disable certificate verification.</li>
<li>If your Elasticsearch instance is secured, you will be prompted to provide either a username and password or an API Key.</li>
<li>Once the integration is setup, you may tweak all configuration options via the <code>Configure</code> button on the <a href="https://my.home-assistant.io/redirect/integration/?domain=elasticsearch" target="_blank">integrations page</a>.</li>
</ol>
<h2 id="configuration-options">Configuration options<a class="headerlink" href="#configuration-options" title="Permanent link">#</a></h2>
<p>Select <code>Configure</code> from the integration's homepage to configure the following settings.</p>
<p><a href="https://my.home-assistant.io/redirect/integration/?domain=elasticsearch" target="_blank"><img alt="Open your Home Assistant instance and show the Elasticsearch integration." src="https://my.home-assistant.io/badges/integration.svg" /></a></p>
<h3 id="send-events-to-elasticsearch-at-this-interval">Send events to Elasticsearch at this interval<a class="headerlink" href="#send-events-to-elasticsearch-at-this-interval" title="Permanent link">#</a></h3>
<p>The frequency at which events are published to Elasticsearch, in seconds. The default is <code>60</code>.</p>
<h3 id="gather-all-entity-states-at-this-interval">Gather all entity states at this interval<a class="headerlink" href="#gather-all-entity-states-at-this-interval" title="Permanent link">#</a></h3>
<p>The frequency at which all entity states are gathered, in seconds. The default is <code>60</code>.</p>
<h3 id="choose-what-types-of-entity-changes-to-listen-for-and-publish">Choose what types of entity changes to listen for and publish<a class="headerlink" href="#choose-what-types-of-entity-changes-to-listen-for-and-publish" title="Permanent link">#</a></h3>
<p>There are two types of entity changes that can be published to Elasticsearch:
- <code>Track entities with state changes</code> - Publish entities when their state changes
- <code>Track entities with attribute changes</code> - Publish entities when their attributes change</p>
<p>Enabling both options will publish entities when either their state or attributes change.</p>
<h3 id="tags-to-apply-to-all-published-events">Tags to apply to all published events<a class="headerlink" href="#tags-to-apply-to-all-published-events" title="Permanent link">#</a></h3>
<p>Tags are values that can be used to filter events in Elasticsearch. You can use this to add tags to all published events.</p>
<h3 id="toggle-to-only-publish-the-set-of-targets-below">Toggle to only publish the set of targets below<a class="headerlink" href="#toggle-to-only-publish-the-set-of-targets-below" title="Permanent link">#</a></h3>
<p>Pick area, device, entity, or labels and only publish events from one of these targets. If you select multiple targets, events that match any of the targets will be published. If you select no targets, all events will be published.</p>
<h3 id="toggle-to-exclude-publishing-the-set-of-targets-below">Toggle to exclude publishing the set of targets below<a class="headerlink" href="#toggle-to-exclude-publishing-the-set-of-targets-below" title="Permanent link">#</a></h3>
<p>Pick area, device, entity, or labels and exclude events from one of these targets. If you select multiple targets, events that match any of the targets will be excluded. If you also configure <code>Toggle to only publish the set of targets below</code>, the exclusion will be applied after the inclusion.</p>
<h2 id="advanced-configuration">Advanced configuration<a class="headerlink" href="#advanced-configuration" title="Permanent link">#</a></h2>
<h3 id="custom-certificate-authority-ca">Custom certificate authority (CA)<a class="headerlink" href="#custom-certificate-authority-ca" title="Permanent link">#</a></h3>
<p>This component will use the system's default certificate authority (CA) bundle to verify the Elasticsearch server's certificate. If you need to use a custom CA, you can provide the path to the CA file in the integration configuration.</p>
<ol>
<li>Place the CA file somewhere within Home Assistant's <code>configuration</code> directory.</li>
<li>Follow the steps above to <a href="#add-the-integration">add the integration</a>.</li>
<li>After providing connection details, the component will attempt to establish a connection to the Elasticsearch server. If the server's certificate is not signed by a known CA, you will be prompted for the CA file's path.</li>
<li>Provide the path to the CA file and continue with the setup.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can choose to bypass certificate verification during setup, if you do not have the CA file available.</p>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.path", "toc.follow"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>